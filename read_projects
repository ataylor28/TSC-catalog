# import packages
from collections import UserList
from re import X
from subprocess import call
import tableauserverclient as TSC
import os
import requests
import pandas as pd

# define environment variables
TOKEN_NAME = os.environ["TOKEN_NAME"]
TOKEN_VALUE = os.environ["TOKEN_VALUE"]
SITENAME = os.environ["SITENAME"]
SERVER_URL = os.environ["SERVER_URL"]

# assign tokens & log in
tableau_auth = TSC.PersonalAccessTokenAuth(TOKEN_NAME, TOKEN_VALUE, SITENAME)
server = TSC.Server(SERVER_URL)
server.auth.sign_in(tableau_auth)

# create function
def read_projects():
    with server.auth.sign_in(tableau_auth):
        all_projects, pagination_item = server.projects.get()
        print("\nThere are {} projects on site: ".format(pagination_item.total_available))
        list = [project.name for project in all_projects]
        print(*list, sep = '\n')
        